Metasploit Frameworkへのエクスプロイトの移植

別のフォーマットで作成したエクスプロイトをMetasploitに移植するメリットは
コミュニティを活発にするだけでなくFrameworkに移植することでその場でペイロードを作成したり
複数のシナリオで実施できたりと、Frameworkに既存であるものに絡めて実施が可能となる。

アセンブリ言語の基本
移植するためにはアセンブリプログラミングの基本を理解する必要がある。

・EIP・ESPレジスタ
レジスタは情報の保存や計算の実行、アプリケーションの実行に必要な値の保持に使われる。
重要なのは以下の2つ。
EIP（拡張命令ポインタ）
→アプリケーションがあるコードを実行した後の次の位置を指す。
　→ここを上書きし悪意あるシェルコードの場所を指定する。
ESP（拡張スタックポインタ）
→通常のアプリケーションデータを指す。
　→バッファオーバーフローのエクスプロイトの場合、クラッシュを引き起こす悪意あるコードの書き込み先を意味する。

・JMP命令セット
ESPメモリアドレスへのジャンプ。

・NOPとNOPスライド
NOPはノーオペレーション命令。何もするな命令。
NOPスライドは少数のNOPで出来ており、必要なところまでスライドする。

移植する場合には既存の近いものを分解してそれを編集するのが手っ取り早いよう。
またNOPスライドは無駄にある場合、侵入検知(IDS)に引っかかる場合が多い。なので消す。